<div ng-controller="SchedulingCtrl" ng-init="init()">

    <div layout="row" layout-margin>
        <div flex="80">
            <h2>Schedules</h2>

        </div>
        <div flex="20">
            <md-button class="md-fab" aria-label="Add Schedule" ng-click="showCreatePopup()">
                <md-icon md-svg-src="assets/svg/ic_add_black_24px.svg"></md-icon>
            </md-button>

        </div>
    </div>


    <md-expansion-panel-group md-component-id="panelGroup" >
        <div ng-repeat="schedule in schedules">
            <md-expansion-panel md-component-id="schedule{{$index}}">
                <md-expansion-panel-collapsed>
                    <div class="md-title">{{schedule.name}} </div>
                    <div class="md-summary">Target: {{schedule.target.name}} - {{schedule.pretty_day}}  {{schedule.startTime}}</div>
                    <div>
                      <md-button class="md-raised" ng-disabled="true">Status: {{schedule.status}}</md-button>
                      <md-button class="md-raised" ng-click="toggleScheduleLock($index)">Manual Overide: {{schedule.lock}}</md-button>
                    </div>
                    <md-expansion-panel-icon></md-expansion-panel-icon>
                </md-expansion-panel-collapsed>
                <md-expansion-panel-expanded>

                    <md-expansion-panel-header>
                        <div class="md-title">{{schedule.name}}</div>
                        <div class="md-summary">Target: {{schedule.target.name}} - {{schedule.pretty_day}}  {{schedule.startTime}}</div>
                        <div>
                          <md-button class="md-raised" >Status: {{schedule.status}}</md-button>
                          <md-button class="md-raised" ng-click="toggleScheduleLock($index)">Manual Overide: {{schedule.lock}}</md-button>
                        </div>
                        <md-expansion-panel-icon></md-expansion-panel-icon>
                    </md-expansion-panel-header>

                    <md-expansion-panel-content>
                      <div layout="row" layout-xs="row">
                        <div flex>
                            <md-input-container class="md-block" flex-gt-xs>
                                <label>Target</label>
                                <input ng-model="schedule.target.name" >
                            </md-input-container>
                        </div>
                      </div>
                        <div layout="row" layout-xs="row">
                            <div flex>
                                <md-input-container class="md-block" flex-gt-xs>
                                    <label>Start Date </label>
                                    <input ng-model="schedule.startDate" >
                                </md-input-container>
                            </div>
                            <div flex>
                                <md-input-container class="md-block" flex-gt-xs>
                                    <label>End Date </label>
                                    <input ng-model="schedule.endDate" >
                                </md-input-container>
                            </div>
                        </div>


                        <md-input-container class="md-block" flex-gt-xs>
                            <label>Day of Week </label>
                            <input ng-model="schedule.pretty_day" >
                        </md-input-container>

                        <div layout="row" layout-xs="row">
                            <div flex>
                                <md-input-container class="md-block" flex-gt-xs>
                                    <label>Start Time</label>
                                    <input ng-model="schedule.startTime" >
                                </md-input-container>
                            </div>
                            <div flex>
                                <md-input-container class="md-block" flex-gt-xs>
                                    <label>Length(mins)</label>
                                    <input ng-model="schedule.length" >
                                </md-input-container>
                            </div>
                        </div>
                        <div layout="row" layout-xs="row">
                            <div flex>
                                <md-input-container>
                                    <label>On length(mins)</label>
                                    <input ng-model="schedule.onLength" type="number" >
                                </md-input-container>
                            </div>
                            <div flex>
                                <md-input-container>
                                    <label>Off length(mins)</label>
                                    <input ng-model="schedule.offLength" type="number" >
                                </md-input-container>
                            </div>
                        </div>
                    </md-expansion-panel-content>


                    <md-expansion-panel-footer>
                        <div flex></div>
                        <md-button class="md-raised md-warn" ng-click="showEditPopup($index)">Edit</md-button>

                        <md-button class="md-raised md-warn" ng-click="deleteSchedule(schedule.id)">Delete</md-button>
                        <md-button class="md-warn" ng-click="$panel.collapse()">Collapse</md-button>
                    </md-expansion-panel-footer>

                </md-expansion-panel-expanded>
            </md-expansion-panel>
        </div>



    </md-expansion-panel-group>
</div>

</div>
